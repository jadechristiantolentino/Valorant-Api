<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Valorant Agents</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container glass-container mt-4 p-4">
      <div class="row align-items-center">
        <div class="col-12 col-md-3">
          <h2 class="header-title">AGENTS</h2>
        </div>
        <div class="col-12 col-md-9 text-end">
          <a href="index.html" class="nav-link fw-semibold">Home</a>
        </div>
      </div>
    </div>

    <div class="container mt-4">
      <input
        type="text"
        id="searchInput"
        class="form-control"
        placeholder="Search Agents"
      />
    </div>

    <div class="container mt-5">
      <div class="row" id="agents-container"></div>
    </div>

    <script>
      var container = document.getElementById("agents-container");
      var searchInput = document.getElementById("searchInput");
      var agentsData = [];

      fetch("https://valorant-api.com/v1/agents?isPlayableCharacter=true")
        .then(function (response) {
          return response.json();
        })
        .then(function (data) {
          agentsData = data.data;
          displayAgents(agentsData);
        })
        .catch(function (error) {
          console.log("Error:", error);
        });

      function displayAgents(agents) {
        container.innerHTML = "";

        for (var i = 0; i < agents.length; i++) {
          var agent = agents[i];

          var card = document.createElement("div");
          card.className = "col-6 col-md-4 col-lg-3 mb-4";

          card.innerHTML =
            '<div class="card agent-card h-100 text-center">' +
            '<img src="' +
            agent.displayIcon +
            '" class="card-img-top p-3">' +
            '<div class="card-body">' +
            '<h5 class="card-title">' +
            agent.displayName +
            "</h5>" +
            '<p class="card-text small">' +
            (agent.role ? agent.role.displayName : "") +
            "</p>" +
            "</div>" +
            "</div>";

          container.appendChild(card);
        }
      }

      searchInput.addEventListener("input", function () {
        var searchValue = searchInput.value.toLowerCase();

        var filteredAgents = agentsData.filter(function (agent) {
          return agent.displayName.toLowerCase().includes(searchValue);
        });

        displayAgents(filteredAgents);
      });
    </script>
  </body>
</html>
